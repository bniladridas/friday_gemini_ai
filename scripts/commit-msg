#!/bin/bash

MSG_FILE=$1

FIRST_LINE=$(head -n1 "$MSG_FILE")

# Check if first line is lowercase
if [[ "$FIRST_LINE" != "$(echo "$FIRST_LINE" | tr '[:upper:]' '[:lower:]')" ]]; then
    echo "Error: Commit message first line must be lowercase."
    exit 1
fi

# Check length <=60
if [[ ${#FIRST_LINE} -gt 60 ]]; then
    echo "Error: Commit message first line must be 60 characters or less."
    exit 1
fi

# Check starts with type:
if [[ ! "$FIRST_LINE" =~ ^[a-z]+: ]]; then
    echo "Error: Commit message must start with a type like 'feat:', 'fix:', etc."
    exit 1
fi

echo "Commit message is valid."